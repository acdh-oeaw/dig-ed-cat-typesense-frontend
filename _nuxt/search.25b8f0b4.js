import{_ as V}from"./nuxt-link.f57a1f02.js";import{o as a,e as u,f as o,a as B,b as D,r as x,w as M,v as P,u as e,l as _,F as y,h as S,i as w,m as f,p as b,t as r,q as z,s as F}from"./entry.4ac8595e.js";import{u as L}from"./search-clients.dd2fd1b8.js";function C(N,c){return a(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M11.47 7.72a.75.75 0 011.06 0l7.5 7.5a.75.75 0 11-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 01-1.06-1.06l7.5-7.5z","clip-rule":"evenodd"})])}const T={class:"max-w-container mx-auto"},$={key:0,class:"grid grid-cols-[1fr_auto_auto] gap-y-2 gap-x-8"},j=o("div",null,"Name",-1),E=o("div",null,"url",-1),I=o("div",null,"time",-1),R={key:1,class:"flex justify-between items-center my-2"},U=["disabled"],A=o("span",{class:"sr-only"},"Previous Page",-1),G=["disabled"],H=o("span",{class:"sr-only"},"Next Page",-1),Q=B({__name:"search",setup(N){const c=D();let i=String(c.query.q||""),t=Number(c.query.page||1),d=Number(c.query.limit||25),l=x(),m=x(!0);const k=L(),p=()=>{m.value=!0,k.collections("dig-ed-cat").documents().search({q:i,query_by:"edition-name",per_page:d,page:t}).then(v=>{console.log(v),l.value=v,m.value=!1})};return p(),(v,s)=>{var g,h;const q=V;return a(),u("div",T,[M(o("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>_(i)?i.value=n:i=n),onInput:s[1]||(s[1]=n=>{_(t)?t.value=1:t=1,p()}),class:"h-8 mx-auto my-4 p-4 rounded border",placeholder:"Search..."},null,544),[[P,e(i)]]),e(m)?w("",!0):(a(),u("div",$,[j,E,I,(a(!0),u(y,null,S((g=e(l))==null?void 0:g.hits,n=>(a(),u(y,null,[o("div",null,[f(q,{href:"/editions/"+n.document.id.replace(/\D/g,"")},{default:z(()=>[F(r(n.document["edition-name"]),1)]),_:2},1032,["href"])]),o("div",null,r(n.document.url),1),o("div",null,r(n.document["time-century"]),1)],64))),256))])),e(m)?w("",!0):(a(),u("div",R,[o("button",{class:b([e(t)<=1&&"text-gray-400 cursor-not-allowed","p-4 border rounded cursor-pointer"]),disabled:e(t)<=1,onClick:s[2]||(s[2]=n=>{_(t)?t.value--:t--,p()})},[A,f(e(C),{class:"w-4 h-4 -rotate-90"})],10,U),o("span",null,"showing "+r((e(t)-1)*e(d)+1)+" - "+r(Math.min(e(l).found,e(t)*e(d)))+" out of "+r((h=e(l))==null?void 0:h.found),1),o("button",{class:b(["p-4 border rounded cursor-pointer",e(t)*e(d)>=e(l).found&&"text-gray-400 cursor-not-allowed"]),disabled:e(t)*e(d)>=e(l).found,onClick:s[3]||(s[3]=n=>{_(t)?t.value++:t++,p()})},[H,f(e(C),{class:"w-4 h-4 rotate-90"})],10,G)]))])}}});export{Q as default};
