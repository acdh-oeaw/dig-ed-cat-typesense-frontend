import{o as n,e as o,f as t,a as P,c as U,w,p as F,q as c,t as r,h as u,u as e,l as R,i as T,r as k,F as x,k as $,s as j,v as S,x as A,y,z as D,A as E}from"./entry.621d62d7.js";import{b as O,d as G,r as H,_ as J}from"./external-link.vue.271003bc.js";import{_ as K}from"./nuxt-link.5946a20b.js";function Q(f,a){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z","clip-rule":"evenodd"})])}function L(f,a){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M11.47 7.72a.75.75 0 011.06 0l7.5 7.5a.75.75 0 11-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 01-1.06-1.06l7.5-7.5z","clip-rule":"evenodd"})])}const W={class:"text-right"},X=P({__name:"internal-link",props:{href:{}},setup(f){return(a,_)=>{const s=K;return n(),U(s,{href:a.href,class:"items-center grid grid-cols-[auto_auto_1fr] hover:bg-slate-200 active:bg-slate-300 p-2 rounded transition"},{default:w(()=>[t("span",null,[F(a.$slots,"default",{},()=>[c(r(a.href),1)])]),c("   "),t("span",W,[u(e(Q),{class:"h-5 w-5 inline-block"})])]),_:3},8,["href"])}}}),Y={},Z={class:"inline-block py-1 px-2 m-1 rounded-full bg-slate-100"};function ee(f,a){return n(),o("div",Z,[F(f.$slots,"default")])}const te=R(Y,[["render",ee]]),se={class:"grid grid-cols-[auto_1fr]"},ne={class:"text-2xl"},le=t("div",null,null,-1),oe={class:"flex items-center gap-1"},ae=["id","value","onUpdate:modelValue"],re=["for"],ie={class:"max-w-container"},de={key:1,class:"flex justify-between items-center my-2"},ue=["disabled"],ce=t("span",{class:"sr-only"},"Previous Page",-1),_e=["disabled"],fe=t("span",{class:"sr-only"},"Next Page",-1),pe={key:2,class:"grid grid-cols-[5fr_3fr_2fr] gap-y-2 gap-x-8"},me=t("div",null,"Name",-1),he=t("div",null,"url",-1),ve=t("div",null,"time",-1),ge={class:"flex items-center"},be={class:"flex items-center"},$e=P({__name:"search",setup(f){const a=T();let _=String(a.query.q||""),s=Number(a.query.page||1),h=Number(a.query.limit||25),i=k(null),p=k(!0),v=k({"historical-period":[],language:[],"time-century":[],audience:[],"begin-date":[],"end-date":[]});const g=Object.keys(v.value);console.log(g);const b=async()=>{p.value=!0,i=await G({q:_,query_by:"edition-name",per_page:250,page:s,facet_by:g.join(",")}),console.log(i.value),p.value=!1};return b(),(xe,d)=>{var C,N,V,q,B,z;return n(),o("div",se,[t("div",null,[c(r(e(v))+" ",1),e(p)?j("",!0):(n(!0),o(x,{key:0},$((C=e(i))==null?void 0:C.facet_counts,(l,M)=>(n(),o("div",null,[t("h1",ne,r(l.field_name),1),le,(n(!0),o(x,null,$(l.counts,m=>(n(),o("div",oe,[S(t("input",{type:"checkbox",id:m.value,value:m.value,"onUpdate:modelValue":I=>e(v)[e(g)[M]]=I},null,8,ae),[[E,e(v)[e(g)[M]]]]),c("   "),t("label",{for:m.value,class:"flex justify-between gap-1 w-full items-center"},[c(r(m.value)+" ",1),u(te,null,{default:w(()=>[c(r(m.count),1)]),_:2},1024)],8,re)]))),256))]))),256))]),t("div",ie,[S(t("input",{type:"search","onUpdate:modelValue":d[0]||(d[0]=l=>y(_)?_.value=l:_=l),onInput:d[1]||(d[1]=l=>{y(s)?s.value=1:s=1,b()}),class:"h-8 mx-auto my-4 p-4 rounded border",placeholder:"Search..."},null,544),[[A,e(_)]]),e(p)?(n(),U(O,{key:0,class:"-z-10"},{default:w(()=>[u(e(H),{class:"h-5 w-5 animate-spin"})]),_:1})):(n(),o("div",de,[t("button",{class:D(["p-4 border rounded transition",e(s)<=1?"text-gray-400 cursor-not-allowed":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:e(s)<=1,onClick:d[2]||(d[2]=l=>{y(s)?s.value--:s--,b()})},[ce,u(e(L),{class:"w-4 h-4 -rotate-90"})],10,ue),t("span",null,"showing "+r((e(s)-1)*e(h)+1)+" - "+r(Math.min(((N=e(i))==null?void 0:N.found)||1/0,e(s)*e(h)))+" out of "+r((V=e(i))==null?void 0:V.found),1),t("button",{class:D(["p-4 border rounded transition",e(s)*e(h)>=Number((q=e(i))==null?void 0:q.found)?"text-gray-400 cursor-not-allowed":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:e(s)*e(h)>=Number((B=e(i))==null?void 0:B.found),onClick:d[3]||(d[3]=l=>{y(s)?s.value++:s++,b()})},[fe,u(e(L),{class:"w-4 h-4 rotate-90"})],10,_e)])),e(p)?j("",!0):(n(),o("div",pe,[me,he,ve,(n(!0),o(x,null,$((z=e(i))==null?void 0:z.hits,l=>(n(),o(x,null,[t("div",null,[u(X,{href:"/editions/"+l.document.id},{default:w(()=>[c(r(l.document["edition-name"]),1)]),_:2},1032,["href"])]),t("div",ge,[u(J,{href:l.document.url},null,8,["href"])]),t("div",be,r(l.document["time-century"]),1)],64))),256))]))])])}}});export{$e as default};
