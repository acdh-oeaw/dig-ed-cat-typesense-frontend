import{o as d,c as _,a as n,_ as se,n as A,f as j,r as h,t as y,i as t,F as E,k as T,q as Q,v as le,s as O,d as S,b as g,w as k,x as q,j as F,y as X,z as I,m as G,A as J,B as ae,C as W,g as ne,D as oe,E as K}from"./entry.08487aae.js";import{k as re,a as ue,c as ie,b as ce,r as de,_ as pe}from"./external-link.vue.83d56ac6.js";import{r as fe,u as R,o as C,c as _e,l as M,H as V,t as Y,b as ve,p as me,N as U,a as P}from"./use-resolve-button-type.56c383e0.js";import{_ as ge}from"./nuxt-link.a15d983b.js";import"./_commonjsHelpers.042e6b4d.js";function he(l,o){return d(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[n("path",{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z","clip-rule":"evenodd"})])}function N(l,o){return d(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[n("path",{"fill-rule":"evenodd",d:"M11.47 7.72a.75.75 0 011.06 0l7.5 7.5a.75.75 0 11-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 01-1.06-1.06l7.5-7.5z","clip-rule":"evenodd"})])}const be={},ye={class:"inline-block py-1 px-2 m-1 rounded-full bg-slate-100"};function xe(l,o){return d(),_("div",ye,[A(l.$slots,"default")])}const we=se(be,[["render",xe]]),ke={class:"flex flex-col"},$e={class:"flex items-center justify-between text-2xl"},De={class:"flex items-center gap-2 rounded p-1 transition hover:bg-slate-200 active:bg-slate-300"},Se=["id","value"],Ce=["for"],je=j({__name:"facet-field",props:{facet:{},selected:{}},setup(l){const o=l;let u=h(o.selected),s=h(!1),e=h(o.facet);const c=async()=>{var a,f,i;s.value=!0;const r=await ue(e.value.field_name);e.value=(f=(a=r.value)==null?void 0:a.facet_counts)!=null&&f.length?(i=r.value)==null?void 0:i.facet_counts[0]:[],s.value=!1};return(r,a)=>{const f=we;return d(),_("div",ke,[n("h1",$e,y(t(re)[t(e).field_name]),1),(d(!0),_(E,null,T(t(e).counts,i=>(d(),_("div",De,[Q(n("input",{type:"checkbox",class:"h-5 w-5 cursor-pointer",id:i.value,value:i.value,onChange:a[0]||(a[0]=b=>r.$emit("facetChange",t(u))),"onUpdate:modelValue":a[1]||(a[1]=b=>O(u)?u.value=b:u=b)},null,40,Se),[[le,t(u)]]),S("   "),n("label",{for:i.value,class:"flex w-full cursor-pointer items-center justify-between gap-1"},[S(y(i.value)+" ",1),g(f,null,{default:k(()=>[S(y(i.count),1)]),_:2},1024)],8,Ce)]))),256)),t(e).stats.total_values!=t(e).counts.length?(d(),_("div",{key:0,class:"flex cursor-pointer items-center justify-center gap-2 rounded p-1 transition hover:bg-slate-200 active:bg-slate-300",onClick:c},[n("span",null," show all... ("+y(t(e).stats.total_values)+" total)",1),g(t(fe),{class:"h-5 w-5"})])):q("",!0)])}}}),Be={class:"text-right"},Pe=j({__name:"internal-link",props:{href:{}},setup(l){return(o,u)=>{const s=ge;return d(),F(s,{href:o.href,class:"items-center grid grid-cols-[auto_auto_1fr] hover:bg-slate-200 active:bg-slate-300 p-2 rounded transition"},{default:k(()=>[n("span",null,[A(o.$slots,"default",{},()=>[S(y(o.href),1)])]),S("   "),n("span",Be,[g(t(he),{class:"h-5 w-5 inline-block"})])]),_:3},8,["href"])}}});var Oe=(l=>(l[l.Open=0]="Open",l[l.Closed=1]="Closed",l))(Oe||{});let Z=Symbol("DisclosureContext");function L(l){let o=W(Z,null);if(o===null){let u=new Error(`<${l} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,L),u}return o}let ee=Symbol("DisclosurePanelContext");function Ee(){return W(ee,null)}let Ie=j({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(l,{slots:o,attrs:u}){let s=h(l.defaultOpen?0:1),e=h(null),c=h(null),r={buttonId:h(null),panelId:h(null),disclosureState:s,panel:e,button:c,toggleDisclosure(){s.value=R(s.value,{[0]:1,[1]:0})},closeDisclosure(){s.value!==1&&(s.value=1)},close(a){r.closeDisclosure();let f=(()=>a?a instanceof HTMLElement?a:a.value instanceof HTMLElement?C(a):C(r.button):C(r.button))();f==null||f.focus()}};return X(Z,r),_e(I(()=>R(s.value,{[0]:M.Open,[1]:M.Closed}))),()=>{let{defaultOpen:a,...f}=l,i={open:s.value===0,close:r.close};return V({theirProps:f,ourProps:{},slot:i,slots:o,attrs:u,name:"Disclosure"})}}}),Me=j({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-disclosure-button-${Y()}`}},setup(l,{attrs:o,slots:u,expose:s}){let e=L("DisclosureButton");G(()=>{e.buttonId.value=l.id}),J(()=>{e.buttonId.value=null});let c=Ee(),r=I(()=>c===null?!1:c.value===e.panelId.value),a=h(null);s({el:a,$el:a}),r.value||ae(()=>{e.button.value=a.value});let f=ve(I(()=>({as:l.as,type:o.type})),a);function i(){var p;l.disabled||(r.value?(e.toggleDisclosure(),(p=C(e.button))==null||p.focus()):e.toggleDisclosure())}function b(p){var x;if(!l.disabled)if(r.value)switch(p.key){case P.Space:case P.Enter:p.preventDefault(),p.stopPropagation(),e.toggleDisclosure(),(x=C(e.button))==null||x.focus();break}else switch(p.key){case P.Space:case P.Enter:p.preventDefault(),p.stopPropagation(),e.toggleDisclosure();break}}function m(p){switch(p.key){case P.Space:p.preventDefault();break}}return()=>{let p={open:e.disclosureState.value===0},{id:x,...w}=l,$=r.value?{ref:a,type:f.value,onClick:i,onKeydown:b}:{id:x,ref:a,type:f.value,"aria-expanded":l.disabled?void 0:e.disclosureState.value===0,"aria-controls":C(e.panel)?e.panelId.value:void 0,disabled:l.disabled?!0:void 0,onClick:i,onKeydown:b,onKeyup:m};return V({ourProps:$,theirProps:w,slot:p,attrs:o,slots:u,name:"DisclosureButton"})}}}),Ne=j({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-disclosure-panel-${Y()}`}},setup(l,{attrs:o,slots:u,expose:s}){let e=L("DisclosurePanel");G(()=>{e.panelId.value=l.id}),J(()=>{e.panelId.value=null}),s({el:e.panel,$el:e.panel}),X(ee,e.panelId);let c=me(),r=I(()=>c!==null?(c.value&M.Open)===M.Open:e.disclosureState.value===0);return()=>{let a={open:e.disclosureState.value===0,close:e.close},{id:f,...i}=l,b={id:f,ref:e.panel};return V({ourProps:b,theirProps:i,slot:a,attrs:o,slots:u,features:U.RenderStrategy|U.Static,visible:r.value,name:"DisclosurePanel"})}}});const Te={class:"mx-auto flex max-w-container items-center px-2"},qe={class:"grid min-w-full gap-4 divide-y p-4 lg:grid-cols-[1fr_3fr_1fr] lg:gap-32 lg:divide-y-0 lg:px-16"},Fe={key:1,class:"min-w-full"},Ve={class:"my-2 flex items-center justify-between"},Le=["disabled"],He=n("span",{class:"sr-only"},"Previous Page",-1),ze=["disabled"],Ke=n("span",{class:"sr-only"},"Next Page",-1),Re={key:0,class:"grid min-w-full grid-cols-[5fr_3fr_2fr] gap-x-8 gap-y-2"},Ue=n("div",null,"Name",-1),Ae=n("div",null,"url",-1),Qe=n("div",{class:"text-right"},"time",-1),Xe={class:"-ml-2"},Ge=["innerHTML"],Je={key:1},We={class:"flex items-center"},Ye={class:"flex items-center justify-end"},at=j({__name:"search",setup(l){const o=ne();let u=String(o.query.q||""),s=Number(o.query.page||1),e=Number(o.query.limit||25),c=h(null),r=h(!0),a=h({"historical-period":[],language:[],"time-century":[],audience:[],"begin-date":[],"end-date":[]});const f=b=>{const m=[];return Object.entries(b).forEach(([x,w])=>{w&&w.length!=0&&m.push(w.map($=>`${x}:="${$}"`).join("&&"))}),m.join(" && ")},i=async()=>{r.value=!0,c=await ce({q:u,query_by:"edition-name",per_page:25,page:s,facet_by:Object.keys(a.value).join(","),filter_by:f(a.value)}),console.log(c.value),r.value=!1};return i(),(b,m)=>{var x,w,$,H,z;const p=je;return d(),_("div",null,[n("div",Te,[Q(n("input",{type:"search","onUpdate:modelValue":m[0]||(m[0]=v=>O(u)?u.value=v:u=v),onInput:m[1]||(m[1]=v=>{O(s)?s.value=1:s=1,i()}),class:"mx-auto my-4 h-16 min-w-full rounded border p-4 shadow",placeholder:"Search..."},null,544),[[oe,t(u)]])]),n("div",null,[n("div",qe,[g(t(Ie),{as:"div",class:"flex flex-col pt-10"},{default:k(({open:v})=>[g(t(Me),{class:"flex items-center justify-end gap-2 rounded align-top text-xl transition hover:bg-slate-200 active:bg-slate-300 lg:justify-center"},{default:k(()=>[S(y(v?"Hide":"Show")+" Filters... ",1),g(t(N),{class:"h-5 w-5 rotate-180 ui-open:rotate-0"})]),_:2},1024),g(t(Ne),{as:"div",class:"flex flex-col gap-2 divide-y"},{default:k(()=>{var B;return[t(r)?q("",!0):(d(!0),_(E,{key:0},T((B=t(c))==null?void 0:B.facet_counts,D=>(d(),F(p,{class:"pt-2",facet:D,selected:t(a)[D.field_name],onFacetChange:te=>{t(a)[D.field_name]=te,i()}},null,8,["facet","selected","onFacetChange"]))),256))]}),_:1})]),_:1}),t(r)?(d(),F(ie,{key:0,class:"-z-10"},{default:k(()=>[g(t(de),{class:"h-5 w-5 animate-spin"})]),_:1})):(d(),_("div",Fe,[n("div",Ve,[n("button",{class:K(["rounded border p-4 transition",t(s)<=1?"cursor-not-allowed text-gray-400":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:t(s)<=1,onClick:m[2]||(m[2]=v=>{O(s)?s.value--:s--,i()})},[He,g(t(N),{class:"h-4 w-4 -rotate-90"})],10,Le),n("span",null,"showing "+y((t(s)-1)*t(e)+1)+" - "+y(Math.min(((x=t(c))==null?void 0:x.found)||1/0,t(s)*t(e)))+" out of "+y((w=t(c))==null?void 0:w.found),1),n("button",{class:K(["rounded border p-4 transition",t(s)*t(e)>=Number(($=t(c))==null?void 0:$.found)?"cursor-not-allowed text-gray-400":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:t(s)*t(e)>=Number((H=t(c))==null?void 0:H.found),onClick:m[3]||(m[3]=v=>{O(s)?s.value++:s++,i()})},[Ke,g(t(N),{class:"h-4 w-4 rotate-90"})],10,ze)]),t(r)?q("",!0):(d(),_("div",Re,[Ue,Ae,Qe,(d(!0),_(E,null,T((z=t(c))==null?void 0:z.hits,v=>(d(),_(E,null,[n("div",Xe,[g(Pe,{href:"/editions/"+v.document.id},{default:k(()=>{var B,D;return[(B=v.highlight["edition-name"])!=null&&B.snippet?(d(),_("span",{key:0,innerHTML:(D=v.highlight["edition-name"])==null?void 0:D.snippet},null,8,Ge)):(d(),_("span",Je,y(v.document["edition-name"]),1))]}),_:2},1032,["href"])]),n("div",We,[g(pe,{href:v.document.url},null,8,["href"])]),n("div",Ye,y(v.document["time-century"]),1)],64))),256))]))]))])])])}}});export{at as default};
