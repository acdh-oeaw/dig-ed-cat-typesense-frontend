import{T as pe,H as fe}from"./components.7a4f3d43.js";import{o as v,c as h,a as d,_ as ve,v as ne,f as E,r as w,t as x,g as a,F as H,k as V,x as le,y as _e,z as B,d as D,b as g,w as $,A as F,j as R,B as he,C as me,D as K,E as Q,n as W,G as se,l as N,H as ae,h as ge,I as ye,J as ee}from"./entry.5439b902.js";import{k as be,a as we,b as xe,r as ke,_ as $e}from"./mapping-objects.8115b3ea.js";import{c as je}from"./centered.d7fdfa96.js";import{_ as Se}from"./nuxt-link.567b029a.js";import"./_commonjsHelpers.042e6b4d.js";import"./asyncData.85e8b862.js";function Oe(e,n){return v(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z","clip-rule":"evenodd"})])}function De(e,n){return v(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z","clip-rule":"evenodd"})])}function q(e,n){return v(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M11.47 7.72a.75.75 0 011.06 0l7.5 7.5a.75.75 0 11-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 01-1.06-1.06l7.5-7.5z","clip-rule":"evenodd"})])}const Ce={},Ee={class:"inline-block py-1 px-2 m-1 rounded-full bg-slate-100"};function Pe(e,n){return v(),h("div",Ee,[ne(e.$slots,"default")])}const Te=ve(Ce,[["render",Pe]]),Be={class:"flex flex-col"},He={class:"flex items-center justify-between text-2xl"},Ae={class:"flex items-center gap-2 rounded p-1 transition hover:bg-slate-200 active:bg-slate-300"},Me=["id","value"],Ne=["for"],Ie=E({__name:"facet-field",props:{facet:{},selected:{}},setup(e){const n=e;let s=w(n.selected),l=w(!1),t=w(n.facet);const f=async()=>{var o,u,c;l.value=!0;const r=await we(t.value.field_name);t.value=(u=(o=r.value)==null?void 0:o.facet_counts)!=null&&u.length?(c=r.value)==null?void 0:c.facet_counts[0]:[],l.value=!1};return(r,o)=>{const u=Te;return v(),h("div",Be,[d("h1",He,x(a(be)[a(t).field_name]),1),(v(!0),h(H,null,V(a(t).counts,c=>(v(),h("div",Ae,[le(d("input",{type:"checkbox",class:"h-5 w-5 cursor-pointer",id:c.value,value:c.value,onChange:o[0]||(o[0]=_=>r.$emit("facetChange",a(s))),"onUpdate:modelValue":o[1]||(o[1]=_=>B(s)?s.value=_:s=_)},null,40,Me),[[_e,a(s)]]),D("   "),d("label",{for:c.value,class:"flex w-full cursor-pointer items-center justify-between gap-1"},[D(x(c.value)+" ",1),g(u,null,{default:$(()=>[D(x(c.count),1)]),_:2},1024)],8,Ne)]))),256)),a(t).stats.total_values!=a(t).counts.length?(v(),h("div",{key:0,class:"flex cursor-pointer items-center justify-center gap-2 rounded p-1 transition hover:bg-slate-200 active:bg-slate-300",onClick:f},[d("span",null," show all... ("+x(a(t).stats.total_values)+" total)",1),g(a(Oe),{class:"h-5 w-5"})])):F("",!0)])}}}),Le={class:"text-right"},qe=E({__name:"internal-link",props:{href:{}},setup(e){return(n,s)=>{const l=Se;return v(),R(l,{href:n.href,class:"items-center grid grid-cols-[auto_auto_1fr] hover:bg-slate-200 active:bg-slate-300 p-2 rounded transition"},{default:$(()=>[d("span",null,[ne(n.$slots,"default",{},()=>[D(x(n.href),1)])]),D("   "),d("span",Le,[g(a(De),{class:"h-5 w-5 inline-block"})])]),_:3},8,["href"])}}});function I(e,n,...s){if(e in n){let t=n[e];return typeof t=="function"?t(...s):t}let l=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(n).map(t=>`"${t}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,I),l}var z=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(z||{}),Ue=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Ue||{});function G({visible:e=!0,features:n=0,ourProps:s,theirProps:l,...t}){var f;let r=re(l,s),o=Object.assign(t,{props:r});if(e||n&2&&r.static)return U(o);if(n&1){let u=(f=r.unmount)==null||f?0:1;return I(u,{[0](){return null},[1](){return U({...t,props:{...r,hidden:!0,style:{display:"none"}}})}})}return U(o)}function U({props:e,attrs:n,slots:s,slot:l,name:t}){var f,r;let{as:o,...u}=Ve(e,["unmount","static"]),c=(f=s.default)==null?void 0:f.call(s,l),_={};if(l){let k=!1,i=[];for(let[y,b]of Object.entries(l))typeof b=="boolean"&&(k=!0),b===!0&&i.push(y);k&&(_["data-headlessui-state"]=i.join(" "))}if(o==="template"){if(c=oe(c??[]),Object.keys(u).length>0||Object.keys(n).length>0){let[k,...i]=c??[];if(!Fe(k)||i.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${t} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(u).concat(Object.keys(n)).map(p=>p.trim()).filter((p,S,M)=>M.indexOf(p)===S).sort((p,S)=>p.localeCompare(S)).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`));let y=re((r=k.props)!=null?r:{},u),b=he(k,y);for(let p in y)p.startsWith("on")&&(b.props||(b.props={}),b.props[p]=y[p]);return b}return Array.isArray(c)&&c.length===1?c[0]:c}return me(o,Object.assign({},u,_),{default:()=>c})}function oe(e){return e.flatMap(n=>n.type===H?oe(n.children):[n])}function re(...e){if(e.length===0)return{};if(e.length===1)return e[0];let n={},s={};for(let l of e)for(let t in l)t.startsWith("on")&&typeof l[t]=="function"?(s[t]!=null||(s[t]=[]),s[t].push(l[t])):n[t]=l[t];if(n.disabled||n["aria-disabled"])return Object.assign(n,Object.fromEntries(Object.keys(s).map(l=>[l,void 0])));for(let l in s)Object.assign(n,{[l](t,...f){let r=s[l];for(let o of r){if(t instanceof Event&&t.defaultPrevented)return;o(t,...f)}}});return n}function Ve(e,n=[]){let s=Object.assign({},e);for(let l of n)l in s&&delete s[l];return s}function Fe(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let Re=0;function ze(){return++Re}function ie(){return ze()}var C=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(C||{});function j(e){var n;return e==null||e.value==null?null:(n=e.value.$el)!=null?n:e.value}let ue=Symbol("Context");var A=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(A||{});function Ke(){return K(ue,null)}function Qe(e){Q(ue,e)}function te(e,n){if(e)return e;let s=n??"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function We(e,n){let s=w(te(e.value.type,e.value.as));return W(()=>{s.value=te(e.value.type,e.value.as)}),se(()=>{var l;s.value||j(n)&&j(n)instanceof HTMLButtonElement&&!((l=j(n))!=null&&l.hasAttribute("type"))&&(s.value="button")}),s}var Ge=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ge||{});let ce=Symbol("DisclosureContext");function J(e){let n=K(ce,null);if(n===null){let s=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,J),s}return n}let de=Symbol("DisclosurePanelContext");function Je(){return K(de,null)}let Xe=E({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(e,{slots:n,attrs:s}){let l=w(e.defaultOpen?0:1),t=w(null),f=w(null),r={buttonId:w(null),panelId:w(null),disclosureState:l,panel:t,button:f,toggleDisclosure(){l.value=I(l.value,{[0]:1,[1]:0})},closeDisclosure(){l.value!==1&&(l.value=1)},close(o){r.closeDisclosure();let u=(()=>o?o instanceof HTMLElement?o:o.value instanceof HTMLElement?j(o):j(r.button):j(r.button))();u==null||u.focus()}};return Q(ce,r),Qe(N(()=>I(l.value,{[0]:A.Open,[1]:A.Closed}))),()=>{let{defaultOpen:o,...u}=e,c={open:l.value===0,close:r.close};return G({theirProps:u,ourProps:{},slot:c,slots:n,attrs:s,name:"Disclosure"})}}}),Ye=E({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-disclosure-button-${ie()}`}},setup(e,{attrs:n,slots:s,expose:l}){let t=J("DisclosureButton");W(()=>{t.buttonId.value=e.id}),ae(()=>{t.buttonId.value=null});let f=Je(),r=N(()=>f===null?!1:f.value===t.panelId.value),o=w(null);l({el:o,$el:o}),r.value||se(()=>{t.button.value=o.value});let u=We(N(()=>({as:e.as,type:n.type})),o);function c(){var i;e.disabled||(r.value?(t.toggleDisclosure(),(i=j(t.button))==null||i.focus()):t.toggleDisclosure())}function _(i){var y;if(!e.disabled)if(r.value)switch(i.key){case C.Space:case C.Enter:i.preventDefault(),i.stopPropagation(),t.toggleDisclosure(),(y=j(t.button))==null||y.focus();break}else switch(i.key){case C.Space:case C.Enter:i.preventDefault(),i.stopPropagation(),t.toggleDisclosure();break}}function k(i){switch(i.key){case C.Space:i.preventDefault();break}}return()=>{let i={open:t.disclosureState.value===0},{id:y,...b}=e,p=r.value?{ref:o,type:u.value,onClick:c,onKeydown:_}:{id:y,ref:o,type:u.value,"aria-expanded":e.disabled?void 0:t.disclosureState.value===0,"aria-controls":j(t.panel)?t.panelId.value:void 0,disabled:e.disabled?!0:void 0,onClick:c,onKeydown:_,onKeyup:k};return G({ourProps:p,theirProps:b,slot:i,attrs:n,slots:s,name:"DisclosureButton"})}}}),Ze=E({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-disclosure-panel-${ie()}`}},setup(e,{attrs:n,slots:s,expose:l}){let t=J("DisclosurePanel");W(()=>{t.panelId.value=e.id}),ae(()=>{t.panelId.value=null}),l({el:t.panel,$el:t.panel}),Q(de,t.panelId);let f=Ke(),r=N(()=>f!==null?(f.value&A.Open)===A.Open:t.disclosureState.value===0);return()=>{let o={open:t.disclosureState.value===0,close:t.close},{id:u,...c}=e,_={id:u,ref:t.panel};return G({ourProps:_,theirProps:c,slot:o,attrs:n,slots:s,features:z.RenderStrategy|z.Static,visible:r.value,name:"DisclosurePanel"})}}});const et={class:"mx-auto flex max-w-container items-center px-2"},tt={class:"grid min-w-full gap-4 divide-y p-4 lg:grid-cols-[1fr_3fr_1fr] lg:gap-32 lg:divide-y-0 lg:px-16"},nt={key:1,class:"min-w-full"},lt={class:"my-2 flex items-center justify-between"},st=["disabled"],at=d("span",{class:"sr-only"},"Previous Page",-1),ot=["disabled"],rt=d("span",{class:"sr-only"},"Next Page",-1),it={key:0,class:"grid min-w-full grid-cols-[5fr_3fr_auto_auto] gap-x-8 gap-y-1"},ut=d("div",null,"Name",-1),ct=d("div",null,"Institution(s)",-1),dt=d("div",null,"url",-1),pt=d("div",{class:"text-right"},"time",-1),ft=d("div",{class:"col-span-4 border-t"},null,-1),vt={class:"-ml-2 self-center"},_t=["innerHTML"],ht={key:1},mt={class:"self-center"},gt={class:"flex items-center"},yt={class:"self-center text-right"},Ot=E({__name:"search",setup(e){const n=ge();let s=String(n.query.q||""),l=Number(n.query.page||1),t=Number(n.query.limit||25),f=String(n.query.inst||""),r=w(null),o=w(!0),u=w({"historical-period":[],language:[],"time-century":[],audience:[],"begin-date":[],"end-date":[],"institution-s.institution-name":f?[f]:[]});const c=k=>{const i=[];return Object.entries(k).forEach(([b,p])=>{p&&p.length!=0&&i.push(p.map(S=>`${b}:="${S}"`).join("&&"))}),i.join(" && ")},_=async()=>{o.value=!0,r=await xe({q:s,query_by:"edition-name",per_page:25,page:l,facet_by:Object.keys(u.value).join(","),filter_by:c(u.value)}),console.log(r.value),o.value=!1};return _(),(k,i)=>{var S,M,X,Y,Z;const y=pe,b=fe,p=Ie;return v(),h("div",null,[g(b,null,{default:$(()=>[g(y,null,{default:$(()=>[D("Browse Editions")]),_:1})]),_:1}),d("div",et,[le(d("input",{type:"search","onUpdate:modelValue":i[0]||(i[0]=m=>B(s)?s.value=m:s=m),onInput:i[1]||(i[1]=m=>{B(l)?l.value=1:l=1,_()}),class:"mx-auto my-4 h-16 min-w-full rounded border p-4 shadow",placeholder:"Search..."},null,544),[[ye,a(s)]])]),d("div",null,[d("div",tt,[g(a(Xe),{as:"div",class:"flex flex-col pt-10",defaultOpen:""},{default:$(({open:m})=>[g(a(Ye),{class:"flex items-center justify-end gap-2 rounded align-top text-xl transition hover:bg-slate-200 active:bg-slate-300 lg:justify-center"},{default:$(()=>[D(x(m?"Hide":"Show")+" Filters... ",1),g(a(q),{class:"h-5 w-5 rotate-180 ui-open:rotate-0"})]),_:2},1024),g(a(Ze),{as:"div",class:"flex flex-col gap-2 divide-y"},{default:$(()=>{var O,P;return[a(o)?F("",!0):(v(!0),h(H,{key:0},V((P=(O=a(r))==null?void 0:O.facet_counts)==null?void 0:P.sort((T,L)=>a(u)[L.field_name].length-a(u)[T.field_name].length),T=>(v(),R(p,{class:"pt-2",facet:T,selected:a(u)[T.field_name],onFacetChange:L=>{a(u)[T.field_name]=L,_()}},null,8,["facet","selected","onFacetChange"]))),256))]}),_:1})]),_:1}),a(o)?(v(),R(je,{key:0,class:"-z-10"},{default:$(()=>[g(a(ke),{class:"h-5 w-5 animate-spin"})]),_:1})):(v(),h("div",nt,[d("div",lt,[d("button",{class:ee(["rounded border p-4 transition",a(l)<=1?"cursor-not-allowed text-gray-400":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:a(l)<=1,onClick:i[2]||(i[2]=m=>{B(l)?l.value--:l--,_()})},[at,g(a(q),{class:"h-4 w-4 -rotate-90"})],10,st),d("span",null,"showing "+x((a(l)-1)*a(t)+1)+" - "+x(Math.min(((S=a(r))==null?void 0:S.found)||1/0,a(l)*a(t)))+" out of "+x((M=a(r))==null?void 0:M.found),1),d("button",{class:ee(["rounded border p-4 transition",a(l)*a(t)>=Number((X=a(r))==null?void 0:X.found)?"cursor-not-allowed text-gray-400":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:a(l)*a(t)>=Number((Y=a(r))==null?void 0:Y.found),onClick:i[3]||(i[3]=m=>{B(l)?l.value++:l++,_()})},[rt,g(a(q),{class:"h-4 w-4 rotate-90"})],10,ot)]),a(o)?F("",!0):(v(),h("div",it,[ut,ct,dt,pt,(v(!0),h(H,null,V((Z=a(r))==null?void 0:Z.hits,m=>(v(),h(H,null,[ft,d("div",vt,[g(qe,{href:"/editions/"+m.document.id},{default:$(()=>{var O,P;return[(O=m.highlight["edition-name"])!=null&&O.snippet?(v(),h("span",{key:0,innerHTML:(P=m.highlight["edition-name"])==null?void 0:P.snippet},null,8,_t)):(v(),h("span",ht,x(m.document["edition-name"]),1))]}),_:2},1032,["href"])]),d("div",mt,x(m.document["institution-s"].map(O=>O["institution-name"]).join(", ")),1),d("div",gt,[g($e,{href:m.document.url,"icon-only":""},null,8,["href"])]),d("div",yt,x(m.document["time-century"]),1)],64))),256))]))]))])])])}}});export{Ot as default};
