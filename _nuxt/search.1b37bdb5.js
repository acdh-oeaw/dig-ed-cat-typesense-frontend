import{o as l,e as a,f as t,a as D,c as L,w as y,p as P,q as c,t as r,h as u,u as e,l as F,i as I,r as w,F as b,k,s as z,v as M,x as R,y as x,z as j,A as T}from"./entry.5411f9bc.js";import{b as A,d as E,k as O,r as G,_ as H}from"./external-link.vue.524c6b00.js";import{_ as J}from"./nuxt-link.6d20326e.js";function K(f,o){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z","clip-rule":"evenodd"})])}function S(f,o){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M11.47 7.72a.75.75 0 011.06 0l7.5 7.5a.75.75 0 11-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 01-1.06-1.06l7.5-7.5z","clip-rule":"evenodd"})])}const Q={class:"text-right"},W=D({__name:"internal-link",props:{href:{}},setup(f){return(o,_)=>{const s=J;return l(),L(s,{href:o.href,class:"items-center grid grid-cols-[auto_auto_1fr] hover:bg-slate-200 active:bg-slate-300 p-2 rounded transition"},{default:y(()=>[t("span",null,[P(o.$slots,"default",{},()=>[c(r(o.href),1)])]),c("   "),t("span",Q,[u(e(K),{class:"h-5 w-5 inline-block"})])]),_:3},8,["href"])}}}),X={},Y={class:"inline-block py-1 px-2 m-1 rounded-full bg-slate-100"};function Z(f,o){return l(),a("div",Y,[P(f.$slots,"default")])}const ee=F(X,[["render",Z]]),te={class:"grid grid-cols-[auto_1fr]"},se={class:"text-2xl"},ne=t("div",null,null,-1),le={class:"flex items-center gap-1"},ae=["id","value","onUpdate:modelValue"],oe=["for"],re={class:"max-w-container"},ie={key:1,class:"flex justify-between items-center my-2"},de=["disabled"],ue=t("span",{class:"sr-only"},"Previous Page",-1),ce=["disabled"],_e=t("span",{class:"sr-only"},"Next Page",-1),fe={key:2,class:"grid grid-cols-[5fr_3fr_2fr] gap-y-2 gap-x-8"},pe=t("div",null,"Name",-1),me=t("div",null,"url",-1),he=t("div",null,"time",-1),ve={class:"flex items-center"},ge={class:"flex items-center"},ke=D({__name:"search",setup(f){const o=I();let _=String(o.query.q||""),s=Number(o.query.page||1),h=Number(o.query.limit||25),i=w(null),p=w(!0),v=w({"historical-period":[],language:[],"time-century":[],audience:[],"begin-date":[],"end-date":[]});const g=async()=>{p.value=!0,i=await E({q:_,query_by:"edition-name",per_page:250,page:s,facet_by:Object.keys(v.value).join(",")}),console.log(i.value),p.value=!1};return g(),(be,d)=>{var $,N,C,V,q,B;return l(),a("div",te,[t("div",null,[c(r(e(v))+" ",1),e(p)?z("",!0):(l(!0),a(b,{key:0},k(($=e(i))==null?void 0:$.facet_counts,n=>(l(),a("div",null,[t("h1",se,r(e(O)[n.field_name]),1),ne,(l(!0),a(b,null,k(n.counts,m=>(l(),a("div",le,[M(t("input",{type:"checkbox",id:m.value,value:m.value,"onUpdate:modelValue":U=>e(v)[n.field_name]=U},null,8,ae),[[T,e(v)[n.field_name]]]),c("   "),t("label",{for:m.value,class:"flex justify-between gap-1 w-full items-center"},[c(r(m.value)+" ",1),u(ee,null,{default:y(()=>[c(r(m.count),1)]),_:2},1024)],8,oe)]))),256))]))),256))]),t("div",re,[M(t("input",{type:"search","onUpdate:modelValue":d[0]||(d[0]=n=>x(_)?_.value=n:_=n),onInput:d[1]||(d[1]=n=>{x(s)?s.value=1:s=1,g()}),class:"h-8 mx-auto my-4 p-4 rounded border",placeholder:"Search..."},null,544),[[R,e(_)]]),e(p)?(l(),L(A,{key:0,class:"-z-10"},{default:y(()=>[u(e(G),{class:"h-5 w-5 animate-spin"})]),_:1})):(l(),a("div",ie,[t("button",{class:j(["p-4 border rounded transition",e(s)<=1?"text-gray-400 cursor-not-allowed":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:e(s)<=1,onClick:d[2]||(d[2]=n=>{x(s)?s.value--:s--,g()})},[ue,u(e(S),{class:"w-4 h-4 -rotate-90"})],10,de),t("span",null,"showing "+r((e(s)-1)*e(h)+1)+" - "+r(Math.min(((N=e(i))==null?void 0:N.found)||1/0,e(s)*e(h)))+" out of "+r((C=e(i))==null?void 0:C.found),1),t("button",{class:j(["p-4 border rounded transition",e(s)*e(h)>=Number((V=e(i))==null?void 0:V.found)?"text-gray-400 cursor-not-allowed":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:e(s)*e(h)>=Number((q=e(i))==null?void 0:q.found),onClick:d[3]||(d[3]=n=>{x(s)?s.value++:s++,g()})},[_e,u(e(S),{class:"w-4 h-4 rotate-90"})],10,ce)])),e(p)?z("",!0):(l(),a("div",fe,[pe,me,he,(l(!0),a(b,null,k((B=e(i))==null?void 0:B.hits,n=>(l(),a(b,null,[t("div",null,[u(W,{href:"/editions/"+n.document.id},{default:y(()=>[c(r(n.document["edition-name"]),1)]),_:2},1032,["href"])]),t("div",ve,[u(H,{href:n.document.url},null,8,["href"])]),t("div",ge,r(n.document["time-century"]),1)],64))),256))]))])])}}});export{ke as default};
