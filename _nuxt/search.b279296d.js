import{o as v,c as h,a as d,_ as ce,q as ee,f as C,r as b,t as k,i as a,F as A,k as V,s as te,v as de,x as T,d as D,b as w,w as S,y as F,j as R,z as pe,A as fe,B as K,C as Q,m as W,D as ne,E as H,G as le,g as ve,H as ge,I as J}from"./entry.393324d0.js";import{k as he,a as me,c as _e,b as ye,r as be,_ as we}from"./mapping-objects.c9cbe15a.js";import{_ as xe}from"./nuxt-link.480b6160.js";import"./_commonjsHelpers.042e6b4d.js";function ke(e,n){return v(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z","clip-rule":"evenodd"})])}function $e(e,n){return v(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z","clip-rule":"evenodd"})])}function q(e,n){return v(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M11.47 7.72a.75.75 0 011.06 0l7.5 7.5a.75.75 0 11-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 01-1.06-1.06l7.5-7.5z","clip-rule":"evenodd"})])}const je={},Se={class:"inline-block py-1 px-2 m-1 rounded-full bg-slate-100"};function Oe(e,n){return v(),h("div",Se,[ee(e.$slots,"default")])}const De=ce(je,[["render",Oe]]),Ce={class:"flex flex-col"},Ee={class:"flex items-center justify-between text-2xl"},Pe={class:"flex items-center gap-2 rounded p-1 transition hover:bg-slate-200 active:bg-slate-300"},Be=["id","value"],Te=["for"],Ae=C({__name:"facet-field",props:{facet:{},selected:{}},setup(e){const n=e;let s=b(n.selected),l=b(!1),t=b(n.facet);const f=async()=>{var o,u,c;l.value=!0;const r=await me(t.value.field_name);t.value=(u=(o=r.value)==null?void 0:o.facet_counts)!=null&&u.length?(c=r.value)==null?void 0:c.facet_counts[0]:[],l.value=!1};return console.log("facet",n.facet),(r,o)=>{const u=De;return v(),h("div",Ce,[d("h1",Ee,k(a(he)[a(t).field_name]),1),(v(!0),h(A,null,V(a(t).counts,c=>(v(),h("div",Pe,[te(d("input",{type:"checkbox",class:"h-5 w-5 cursor-pointer",id:c.value,value:c.value,onChange:o[0]||(o[0]=g=>r.$emit("facetChange",a(s))),"onUpdate:modelValue":o[1]||(o[1]=g=>T(s)?s.value=g:s=g)},null,40,Be),[[de,a(s)]]),D("   "),d("label",{for:c.value,class:"flex w-full cursor-pointer items-center justify-between gap-1"},[D(k(c.value)+" ",1),w(u,null,{default:S(()=>[D(k(c.count),1)]),_:2},1024)],8,Te)]))),256)),a(t).stats.total_values!=a(t).counts.length?(v(),h("div",{key:0,class:"flex cursor-pointer items-center justify-center gap-2 rounded p-1 transition hover:bg-slate-200 active:bg-slate-300",onClick:f},[d("span",null," show all... ("+k(a(t).stats.total_values)+" total)",1),w(a(ke),{class:"h-5 w-5"})])):F("",!0)])}}}),Me={class:"text-right"},Ne=C({__name:"internal-link",props:{href:{}},setup(e){return(n,s)=>{const l=xe;return v(),R(l,{href:n.href,class:"items-center grid grid-cols-[auto_auto_1fr] hover:bg-slate-200 active:bg-slate-300 p-2 rounded transition"},{default:S(()=>[d("span",null,[ee(n.$slots,"default",{},()=>[D(k(n.href),1)])]),D("   "),d("span",Me,[w(a($e),{class:"h-5 w-5 inline-block"})])]),_:3},8,["href"])}}});function I(e,n,...s){if(e in n){let t=n[e];return typeof t=="function"?t(...s):t}let l=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(n).map(t=>`"${t}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,I),l}var z=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(z||{}),He=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(He||{});function G({visible:e=!0,features:n=0,ourProps:s,theirProps:l,...t}){var f;let r=ae(l,s),o=Object.assign(t,{props:r});if(e||n&2&&r.static)return U(o);if(n&1){let u=(f=r.unmount)==null||f?0:1;return I(u,{[0](){return null},[1](){return U({...t,props:{...r,hidden:!0,style:{display:"none"}}})}})}return U(o)}function U({props:e,attrs:n,slots:s,slot:l,name:t}){var f,r;let{as:o,...u}=Ie(e,["unmount","static"]),c=(f=s.default)==null?void 0:f.call(s,l),g={};if(l){let x=!1,i=[];for(let[y,m]of Object.entries(l))typeof m=="boolean"&&(x=!0),m===!0&&i.push(y);x&&(g["data-headlessui-state"]=i.join(" "))}if(o==="template"){if(c=se(c??[]),Object.keys(u).length>0||Object.keys(n).length>0){let[x,...i]=c??[];if(!Le(x)||i.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${t} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(u).concat(Object.keys(n)).map(p=>p.trim()).filter((p,j,N)=>N.indexOf(p)===j).sort((p,j)=>p.localeCompare(j)).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`));let y=ae((r=x.props)!=null?r:{},u),m=pe(x,y);for(let p in y)p.startsWith("on")&&(m.props||(m.props={}),m.props[p]=y[p]);return m}return Array.isArray(c)&&c.length===1?c[0]:c}return fe(o,Object.assign({},u,g),{default:()=>c})}function se(e){return e.flatMap(n=>n.type===A?se(n.children):[n])}function ae(...e){if(e.length===0)return{};if(e.length===1)return e[0];let n={},s={};for(let l of e)for(let t in l)t.startsWith("on")&&typeof l[t]=="function"?(s[t]!=null||(s[t]=[]),s[t].push(l[t])):n[t]=l[t];if(n.disabled||n["aria-disabled"])return Object.assign(n,Object.fromEntries(Object.keys(s).map(l=>[l,void 0])));for(let l in s)Object.assign(n,{[l](t,...f){let r=s[l];for(let o of r){if(t instanceof Event&&t.defaultPrevented)return;o(t,...f)}}});return n}function Ie(e,n=[]){let s=Object.assign({},e);for(let l of n)l in s&&delete s[l];return s}function Le(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let qe=0;function Ue(){return++qe}function oe(){return Ue()}var O=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(O||{});function $(e){var n;return e==null||e.value==null?null:(n=e.value.$el)!=null?n:e.value}let re=Symbol("Context");var M=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(M||{});function Ve(){return K(re,null)}function Fe(e){Q(re,e)}function Z(e,n){if(e)return e;let s=n??"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function Re(e,n){let s=b(Z(e.value.type,e.value.as));return W(()=>{s.value=Z(e.value.type,e.value.as)}),ne(()=>{var l;s.value||$(n)&&$(n)instanceof HTMLButtonElement&&!((l=$(n))!=null&&l.hasAttribute("type"))&&(s.value="button")}),s}var ze=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ze||{});let ie=Symbol("DisclosureContext");function X(e){let n=K(ie,null);if(n===null){let s=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,X),s}return n}let ue=Symbol("DisclosurePanelContext");function Ke(){return K(ue,null)}let Qe=C({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(e,{slots:n,attrs:s}){let l=b(e.defaultOpen?0:1),t=b(null),f=b(null),r={buttonId:b(null),panelId:b(null),disclosureState:l,panel:t,button:f,toggleDisclosure(){l.value=I(l.value,{[0]:1,[1]:0})},closeDisclosure(){l.value!==1&&(l.value=1)},close(o){r.closeDisclosure();let u=(()=>o?o instanceof HTMLElement?o:o.value instanceof HTMLElement?$(o):$(r.button):$(r.button))();u==null||u.focus()}};return Q(ie,r),Fe(H(()=>I(l.value,{[0]:M.Open,[1]:M.Closed}))),()=>{let{defaultOpen:o,...u}=e,c={open:l.value===0,close:r.close};return G({theirProps:u,ourProps:{},slot:c,slots:n,attrs:s,name:"Disclosure"})}}}),We=C({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-disclosure-button-${oe()}`}},setup(e,{attrs:n,slots:s,expose:l}){let t=X("DisclosureButton");W(()=>{t.buttonId.value=e.id}),le(()=>{t.buttonId.value=null});let f=Ke(),r=H(()=>f===null?!1:f.value===t.panelId.value),o=b(null);l({el:o,$el:o}),r.value||ne(()=>{t.button.value=o.value});let u=Re(H(()=>({as:e.as,type:n.type})),o);function c(){var i;e.disabled||(r.value?(t.toggleDisclosure(),(i=$(t.button))==null||i.focus()):t.toggleDisclosure())}function g(i){var y;if(!e.disabled)if(r.value)switch(i.key){case O.Space:case O.Enter:i.preventDefault(),i.stopPropagation(),t.toggleDisclosure(),(y=$(t.button))==null||y.focus();break}else switch(i.key){case O.Space:case O.Enter:i.preventDefault(),i.stopPropagation(),t.toggleDisclosure();break}}function x(i){switch(i.key){case O.Space:i.preventDefault();break}}return()=>{let i={open:t.disclosureState.value===0},{id:y,...m}=e,p=r.value?{ref:o,type:u.value,onClick:c,onKeydown:g}:{id:y,ref:o,type:u.value,"aria-expanded":e.disabled?void 0:t.disclosureState.value===0,"aria-controls":$(t.panel)?t.panelId.value:void 0,disabled:e.disabled?!0:void 0,onClick:c,onKeydown:g,onKeyup:x};return G({ourProps:p,theirProps:m,slot:i,attrs:n,slots:s,name:"DisclosureButton"})}}}),Ge=C({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-disclosure-panel-${oe()}`}},setup(e,{attrs:n,slots:s,expose:l}){let t=X("DisclosurePanel");W(()=>{t.panelId.value=e.id}),le(()=>{t.panelId.value=null}),l({el:t.panel,$el:t.panel}),Q(ue,t.panelId);let f=Ve(),r=H(()=>f!==null?(f.value&M.Open)===M.Open:t.disclosureState.value===0);return()=>{let o={open:t.disclosureState.value===0,close:t.close},{id:u,...c}=e,g={id:u,ref:t.panel};return G({ourProps:g,theirProps:c,slot:o,attrs:n,slots:s,features:z.RenderStrategy|z.Static,visible:r.value,name:"DisclosurePanel"})}}});const Xe=d("head",null,[d("title",null,"Browse Editions")],-1),Ye={class:"mx-auto flex max-w-container items-center px-2"},Je={class:"grid min-w-full gap-4 divide-y p-4 lg:grid-cols-[1fr_3fr_1fr] lg:gap-32 lg:divide-y-0 lg:px-16"},Ze={key:1,class:"min-w-full"},et={class:"my-2 flex items-center justify-between"},tt=["disabled"],nt=d("span",{class:"sr-only"},"Previous Page",-1),lt=["disabled"],st=d("span",{class:"sr-only"},"Next Page",-1),at={key:0,class:"grid min-w-full grid-cols-[5fr_3fr_2fr] gap-x-8 gap-y-2"},ot=d("div",null,"Name",-1),rt=d("div",null,"url",-1),it=d("div",{class:"text-right"},"time",-1),ut={class:"-ml-2"},ct=["innerHTML"],dt={key:1},pt={class:"flex items-center"},ft={class:"flex items-center justify-end"},_t=C({__name:"search",setup(e){const n=ve();let s=String(n.query.q||""),l=Number(n.query.page||1),t=Number(n.query.limit||25),f=String(n.query.inst||""),r=b(null),o=b(!0),u=b({"historical-period":[],language:[],"time-century":[],audience:[],"begin-date":[],"end-date":[],"institution-s.institution-name":f?[f]:[]});const c=x=>{const i=[];return Object.entries(x).forEach(([m,p])=>{p&&p.length!=0&&i.push(p.map(j=>`${m}:="${j}"`).join("&&"))}),i.join(" && ")},g=async()=>{o.value=!0,r=await ye({q:s,query_by:"edition-name",per_page:25,page:l,facet_by:Object.keys(u.value).join(","),filter_by:c(u.value)}),console.log(r.value),o.value=!1};return g(),(x,i)=>{var m,p,j,N,Y;const y=Ae;return v(),h("div",null,[Xe,d("div",Ye,[te(d("input",{type:"search","onUpdate:modelValue":i[0]||(i[0]=_=>T(s)?s.value=_:s=_),onInput:i[1]||(i[1]=_=>{T(l)?l.value=1:l=1,g()}),class:"mx-auto my-4 h-16 min-w-full rounded border p-4 shadow",placeholder:"Search..."},null,544),[[ge,a(s)]])]),d("div",null,[d("div",Je,[w(a(Qe),{as:"div",class:"flex flex-col pt-10",defaultOpen:""},{default:S(({open:_})=>[w(a(We),{class:"flex items-center justify-end gap-2 rounded align-top text-xl transition hover:bg-slate-200 active:bg-slate-300 lg:justify-center"},{default:S(()=>[D(k(_?"Hide":"Show")+" Filters... ",1),w(a(q),{class:"h-5 w-5 rotate-180 ui-open:rotate-0"})]),_:2},1024),w(a(Ge),{as:"div",class:"flex flex-col gap-2 divide-y"},{default:S(()=>{var E,P;return[a(o)?F("",!0):(v(!0),h(A,{key:0},V((P=(E=a(r))==null?void 0:E.facet_counts)==null?void 0:P.sort((B,L)=>a(u)[L.field_name].length-a(u)[B.field_name].length),B=>(v(),R(y,{class:"pt-2",facet:B,selected:a(u)[B.field_name],onFacetChange:L=>{a(u)[B.field_name]=L,g()}},null,8,["facet","selected","onFacetChange"]))),256))]}),_:1})]),_:1}),a(o)?(v(),R(_e,{key:0,class:"-z-10"},{default:S(()=>[w(a(be),{class:"h-5 w-5 animate-spin"})]),_:1})):(v(),h("div",Ze,[d("div",et,[d("button",{class:J(["rounded border p-4 transition",a(l)<=1?"cursor-not-allowed text-gray-400":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:a(l)<=1,onClick:i[2]||(i[2]=_=>{T(l)?l.value--:l--,g()})},[nt,w(a(q),{class:"h-4 w-4 -rotate-90"})],10,tt),d("span",null,"showing "+k((a(l)-1)*a(t)+1)+" - "+k(Math.min(((m=a(r))==null?void 0:m.found)||1/0,a(l)*a(t)))+" out of "+k((p=a(r))==null?void 0:p.found),1),d("button",{class:J(["rounded border p-4 transition",a(l)*a(t)>=Number((j=a(r))==null?void 0:j.found)?"cursor-not-allowed text-gray-400":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:a(l)*a(t)>=Number((N=a(r))==null?void 0:N.found),onClick:i[3]||(i[3]=_=>{T(l)?l.value++:l++,g()})},[st,w(a(q),{class:"h-4 w-4 rotate-90"})],10,lt)]),a(o)?F("",!0):(v(),h("div",at,[ot,rt,it,(v(!0),h(A,null,V((Y=a(r))==null?void 0:Y.hits,_=>(v(),h(A,null,[d("div",ut,[w(Ne,{href:"/editions/"+_.document.id},{default:S(()=>{var E,P;return[(E=_.highlight["edition-name"])!=null&&E.snippet?(v(),h("span",{key:0,innerHTML:(P=_.highlight["edition-name"])==null?void 0:P.snippet},null,8,ct)):(v(),h("span",dt,k(_.document["edition-name"]),1))]}),_:2},1032,["href"])]),d("div",pt,[w(we,{href:_.document.url},null,8,["href"])]),d("div",ft,k(_.document["time-century"]),1)],64))),256))]))]))])])])}}});export{_t as default};
