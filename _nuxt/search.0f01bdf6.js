import{o as g,e as _,f as d,l as ue,p as Y,a as C,r as b,q as $,t as k,u as a,h as y,w as S,F as P,k as L,s as J,v as ie,x as E,y as U,c as V,z as ce,A as de,B as R,C as q,b as z,D as Z,E as N,G as ee,i as pe,H as fe,I as G}from"./entry.08bbabaa.js";import{k as ve,d as he,b as me,e as ge,r as _e,_ as be}from"./external-link.vue.c5e17c9a.js";import{_ as ye}from"./nuxt-link.57cd4a18.js";function we(e,n){return g(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z","clip-rule":"evenodd"})])}function xe(e,n){return g(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z","clip-rule":"evenodd"})])}function M(e,n){return g(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M11.47 7.72a.75.75 0 011.06 0l7.5 7.5a.75.75 0 11-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 01-1.06-1.06l7.5-7.5z","clip-rule":"evenodd"})])}const ke={},$e={class:"inline-block py-1 px-2 m-1 rounded-full bg-slate-100"};function je(e,n){return g(),_("div",$e,[Y(e.$slots,"default")])}const Se=ue(ke,[["render",je]]),De={class:"flex flex-col"},Oe={class:"text-2xl flex justify-between items-center"},Ce={class:"p-1 flex items-center rounded transition active:bg-slate-300 hover:bg-slate-200 gap-2"},Ee=["id","value"],Pe=["for"],Be=d("span",null," show all... ",-1),Te=C({__name:"facet-field",props:{facet:{},selected:{}},setup(e){const n=e;let s=b(n.selected),t=b(!1),l=b(!0),u=b(n.facet);const r=async()=>{var c,i,v;t.value=!0;const o=await he(u.value.field_name);console.log(o),u.value=(i=(c=o.value)==null?void 0:c.facet_counts)!=null&&i.length?(v=o.value)==null?void 0:v.facet_counts[0]:[],l.value=!1,t.value=!1};return(o,c)=>{const i=Se;return g(),_("div",De,[d("h1",Oe,[$(k(a(ve)[a(u).field_name])+" ",1),y(i,null,{default:S(()=>[$(k(a(u).stats.total_values),1)]),_:1})]),(g(!0),_(P,null,L(a(u).counts,v=>(g(),_("div",Ce,[J(d("input",{type:"checkbox",class:"cursor-pointer h-5 w-5",id:v.value,value:v.value,onChange:c[0]||(c[0]=p=>o.$emit("facetChange",a(s))),"onUpdate:modelValue":c[1]||(c[1]=p=>E(s)?s.value=p:s=p)},null,40,Ee),[[ie,a(s)]]),$("   "),d("label",{for:v.value,class:"flex justify-between gap-1 w-full items-center cursor-pointer"},[$(k(v.value)+" ",1),y(i,null,{default:S(()=>[$(k(v.count),1)]),_:2},1024)],8,Pe)]))),256)),a(l)?(g(),_("div",{key:0,class:"cursor-pointer hover:bg-slate-200 active:bg-slate-300 rounded transition p-1 flex items-center justify-center gap-2",onClick:r},[Be,y(a(we),{class:"h-5 w-5"})])):U("",!0)])}}}),Ae={class:"text-right"},Ne=C({__name:"internal-link",props:{href:{}},setup(e){return(n,s)=>{const t=ye;return g(),V(t,{href:n.href,class:"items-center grid grid-cols-[auto_auto_1fr] hover:bg-slate-200 active:bg-slate-300 p-2 rounded transition"},{default:S(()=>[d("span",null,[Y(n.$slots,"default",{},()=>[$(k(n.href),1)])]),$("   "),d("span",Ae,[y(a(xe),{class:"h-5 w-5 inline-block"})])]),_:3},8,["href"])}}});function I(e,n,...s){if(e in n){let l=n[e];return typeof l=="function"?l(...s):l}let t=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(n).map(l=>`"${l}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,I),t}var F=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(F||{}),Ie=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Ie||{});function K({visible:e=!0,features:n=0,ourProps:s,theirProps:t,...l}){var u;let r=le(t,s),o=Object.assign(l,{props:r});if(e||n&2&&r.static)return H(o);if(n&1){let c=(u=r.unmount)==null||u?0:1;return I(c,{[0](){return null},[1](){return H({...l,props:{...r,hidden:!0,style:{display:"none"}}})}})}return H(o)}function H({props:e,attrs:n,slots:s,slot:t,name:l}){var u,r;let{as:o,...c}=Me(e,["unmount","static"]),i=(u=s.default)==null?void 0:u.call(s,t),v={};if(t){let p=!1,f=[];for(let[m,w]of Object.entries(t))typeof w=="boolean"&&(p=!0),w===!0&&f.push(m);p&&(v["data-headlessui-state"]=f.join(" "))}if(o==="template"){if(i=te(i??[]),Object.keys(c).length>0||Object.keys(n).length>0){let[p,...f]=i??[];if(!He(p)||f.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${l} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(c).concat(Object.keys(n)).map(h=>h.trim()).filter((h,D,T)=>T.indexOf(h)===D).sort((h,D)=>h.localeCompare(D)).map(h=>`  - ${h}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
`)].join(`
`));let m=le((r=p.props)!=null?r:{},c),w=ce(p,m);for(let h in m)h.startsWith("on")&&(w.props||(w.props={}),w.props[h]=m[h]);return w}return Array.isArray(i)&&i.length===1?i[0]:i}return de(o,Object.assign({},c,v),{default:()=>i})}function te(e){return e.flatMap(n=>n.type===P?te(n.children):[n])}function le(...e){if(e.length===0)return{};if(e.length===1)return e[0];let n={},s={};for(let t of e)for(let l in t)l.startsWith("on")&&typeof t[l]=="function"?(s[l]!=null||(s[l]=[]),s[l].push(t[l])):n[l]=t[l];if(n.disabled||n["aria-disabled"])return Object.assign(n,Object.fromEntries(Object.keys(s).map(t=>[t,void 0])));for(let t in s)Object.assign(n,{[t](l,...u){let r=s[t];for(let o of r){if(l instanceof Event&&l.defaultPrevented)return;o(l,...u)}}});return n}function Me(e,n=[]){let s=Object.assign({},e);for(let t of n)t in s&&delete s[t];return s}function He(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let Le=0;function Ue(){return++Le}function ne(){return Ue()}var O=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(O||{});function j(e){var n;return e==null||e.value==null?null:(n=e.value.$el)!=null?n:e.value}let se=Symbol("Context");var B=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(B||{});function Ve(){return R(se,null)}function Fe(e){q(se,e)}function X(e,n){if(e)return e;let s=n??"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function Re(e,n){let s=b(X(e.value.type,e.value.as));return z(()=>{s.value=X(e.value.type,e.value.as)}),Z(()=>{var t;s.value||j(n)&&j(n)instanceof HTMLButtonElement&&!((t=j(n))!=null&&t.hasAttribute("type"))&&(s.value="button")}),s}var qe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(qe||{});let ae=Symbol("DisclosureContext");function Q(e){let n=R(ae,null);if(n===null){let s=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Q),s}return n}let oe=Symbol("DisclosurePanelContext");function ze(){return R(oe,null)}let Ke=C({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(e,{slots:n,attrs:s}){let t=b(e.defaultOpen?0:1),l=b(null),u=b(null),r={buttonId:b(null),panelId:b(null),disclosureState:t,panel:l,button:u,toggleDisclosure(){t.value=I(t.value,{[0]:1,[1]:0})},closeDisclosure(){t.value!==1&&(t.value=1)},close(o){r.closeDisclosure();let c=(()=>o?o instanceof HTMLElement?o:o.value instanceof HTMLElement?j(o):j(r.button):j(r.button))();c==null||c.focus()}};return q(ae,r),Fe(N(()=>I(t.value,{[0]:B.Open,[1]:B.Closed}))),()=>{let{defaultOpen:o,...c}=e,i={open:t.value===0,close:r.close};return K({theirProps:c,ourProps:{},slot:i,slots:n,attrs:s,name:"Disclosure"})}}}),Qe=C({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-disclosure-button-${ne()}`}},setup(e,{attrs:n,slots:s,expose:t}){let l=Q("DisclosureButton");z(()=>{l.buttonId.value=e.id}),ee(()=>{l.buttonId.value=null});let u=ze(),r=N(()=>u===null?!1:u.value===l.panelId.value),o=b(null);t({el:o,$el:o}),r.value||Z(()=>{l.button.value=o.value});let c=Re(N(()=>({as:e.as,type:n.type})),o);function i(){var f;e.disabled||(r.value?(l.toggleDisclosure(),(f=j(l.button))==null||f.focus()):l.toggleDisclosure())}function v(f){var m;if(!e.disabled)if(r.value)switch(f.key){case O.Space:case O.Enter:f.preventDefault(),f.stopPropagation(),l.toggleDisclosure(),(m=j(l.button))==null||m.focus();break}else switch(f.key){case O.Space:case O.Enter:f.preventDefault(),f.stopPropagation(),l.toggleDisclosure();break}}function p(f){switch(f.key){case O.Space:f.preventDefault();break}}return()=>{let f={open:l.disclosureState.value===0},{id:m,...w}=e,h=r.value?{ref:o,type:c.value,onClick:i,onKeydown:v}:{id:m,ref:o,type:c.value,"aria-expanded":e.disabled?void 0:l.disclosureState.value===0,"aria-controls":j(l.panel)?l.panelId.value:void 0,disabled:e.disabled?!0:void 0,onClick:i,onKeydown:v,onKeyup:p};return K({ourProps:h,theirProps:w,slot:f,attrs:n,slots:s,name:"DisclosureButton"})}}}),We=C({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-disclosure-panel-${ne()}`}},setup(e,{attrs:n,slots:s,expose:t}){let l=Q("DisclosurePanel");z(()=>{l.panelId.value=e.id}),ee(()=>{l.panelId.value=null}),t({el:l.panel,$el:l.panel}),q(oe,l.panelId);let u=Ve(),r=N(()=>u!==null?(u.value&B.Open)===B.Open:l.disclosureState.value===0);return()=>{let o={open:l.disclosureState.value===0,close:l.close},{id:c,...i}=e,v={id:c,ref:l.panel};return K({ourProps:v,theirProps:i,slot:o,attrs:n,slots:s,features:F.RenderStrategy|F.Static,visible:r.value,name:"DisclosurePanel"})}}});const Ge={class:"flex items-center max-w-container mx-auto"},Xe={class:"grid lg:grid-cols-[1fr_3fr] divide-y lg:divide-y-0 p-4 gap-10 min-w-full"},Ye={key:1,class:"min-w-full"},Je={class:"flex justify-between items-center my-2"},Ze=["disabled"],et=d("span",{class:"sr-only"},"Previous Page",-1),tt=["disabled"],lt=d("span",{class:"sr-only"},"Next Page",-1),nt={key:0,class:"grid grid-cols-[5fr_3fr_2fr] gap-y-2 gap-x-8 min-w-full"},st=d("div",null,"Name",-1),at=d("div",null,"url",-1),ot=d("div",null,"time",-1),rt={class:"flex items-center"},ut={class:"flex items-center"},pt=C({__name:"search",setup(e){const n=pe();let s=String(n.query.q||""),t=Number(n.query.page||1),l=Number(n.query.limit||25),u=b(null),r=b(!0),o=b({"historical-period":[],language:[],"time-century":[],audience:[],"begin-date":[],"end-date":[]});const c=v=>{const p=[];return Object.entries(v).forEach(([f,m])=>{m&&m.length!=0&&p.push(f+":=[`"+m.join("`,`")+"`]")}),p.join(" && ")},i=async()=>{r.value=!0,u=await ge({q:s,query_by:"edition-name",per_page:25,page:t,facet_by:Object.keys(o.value).join(","),filter_by:c(o.value)}),r.value=!1};return i(),(v,p)=>{var m,w,h,D,T;const f=Te;return g(),_("div",null,[d("div",Ge,[J(d("input",{type:"search","onUpdate:modelValue":p[0]||(p[0]=x=>E(s)?s.value=x:s=x),onInput:p[1]||(p[1]=x=>{E(t)?t.value=1:t=1,i()}),class:"h-8 mx-auto my-4 p-4 rounded border min-w-full",placeholder:"Search..."},null,544),[[fe,a(s)]])]),d("div",null,[d("div",Xe,[y(a(Ke),{as:"div",class:"flex flex-col pt-10"},{default:S(({open:x})=>[y(a(Qe),{class:"rounded transition hover:bg-slate-200 active:bg-slate-300 flex items-center gap-2 justify-center text-xl align-top"},{default:S(()=>[$(k(x?"Hide":"Show")+" Filters... ",1),y(a(M),{class:"rotate-180 ui-open:rotate-0 h-5 w-5"})]),_:2},1024),y(a(We),null,{default:S(()=>{var W;return[a(r)?U("",!0):(g(!0),_(P,{key:0},L((W=a(u))==null?void 0:W.facet_counts,A=>(g(),V(f,{key:A.field_name,facet:A,selected:a(o)[A.field_name],onFacetChange:re=>{a(o)[A.field_name]=re,i()}},null,8,["facet","selected","onFacetChange"]))),128))]}),_:1})]),_:1}),a(r)?(g(),V(me,{key:0,class:"-z-10"},{default:S(()=>[y(a(_e),{class:"h-5 w-5 animate-spin"})]),_:1})):(g(),_("div",Ye,[d("div",Je,[d("button",{class:G(["p-4 border rounded transition",a(t)<=1?"text-gray-400 cursor-not-allowed":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:a(t)<=1,onClick:p[2]||(p[2]=x=>{E(t)?t.value--:t--,i()})},[et,y(a(M),{class:"w-4 h-4 -rotate-90"})],10,Ze),d("span",null,"showing "+k((a(t)-1)*a(l)+1)+" - "+k(Math.min(((m=a(u))==null?void 0:m.found)||1/0,a(t)*a(l)))+" out of "+k((w=a(u))==null?void 0:w.found),1),d("button",{class:G(["p-4 border rounded transition",a(t)*a(l)>=Number((h=a(u))==null?void 0:h.found)?"text-gray-400 cursor-not-allowed":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:a(t)*a(l)>=Number((D=a(u))==null?void 0:D.found),onClick:p[3]||(p[3]=x=>{E(t)?t.value++:t++,i()})},[lt,y(a(M),{class:"w-4 h-4 rotate-90"})],10,tt)]),a(r)?U("",!0):(g(),_("div",nt,[st,at,ot,(g(!0),_(P,null,L((T=a(u))==null?void 0:T.hits,x=>(g(),_(P,null,[d("div",null,[y(Ne,{href:"/editions/"+x.document.id},{default:S(()=>[$(k(x.document["edition-name"]),1)]),_:2},1032,["href"])]),d("div",rt,[y(be,{href:x.document.url},null,8,["href"])]),d("div",ut,k(x.document["time-century"]),1)],64))),256))]))]))])])])}}});export{pt as default};
