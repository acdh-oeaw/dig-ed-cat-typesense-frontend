import{o,e as i,f as s,l as T,p as D,a as N,r as x,t as u,u as e,F as w,k as $,q as L,v as E,s as g,x as p,h as f,w as k,c as C,i as I,y as F,z as R,A as S}from"./entry.daaaed31.js";import{k as U,b as Q,d as G,r as H,_ as J}from"./external-link.vue.6d886adb.js";import{_ as K}from"./nuxt-link.5d262742.js";function W(m,n){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z","clip-rule":"evenodd"})])}function A(m,n){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M11.47 7.72a.75.75 0 011.06 0l7.5 7.5a.75.75 0 11-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 01-1.06-1.06l7.5-7.5z","clip-rule":"evenodd"})])}const X={},Y={class:"inline-block py-1 px-2 m-1 rounded-full bg-slate-100"};function Z(m,n){return o(),i("div",Y,[D(m.$slots,"default")])}const ee=T(X,[["render",Z]]),te={class:"text-2xl"},se={class:"flex items-center gap-1"},ne=["id","value"],oe=["for"],ae=N({__name:"facet-field",props:{facet:{}},setup(m){let n=x([]);return(c,t)=>{const h=ee;return o(),i("div",null,[s("h1",te,u(e(U)[c.facet.field_name]),1),s("span",null,u(e(n)),1),(o(!0),i(w,null,$(c.facet.counts,a=>(o(),i("div",se,[L(s("input",{type:"checkbox",id:a.value,value:a.value,onChange:t[0]||(t[0]=d=>c.$emit("facetChange",e(n))),"onUpdate:modelValue":t[1]||(t[1]=d=>g(n)?n.value=d:n=d)},null,40,ne),[[E,e(n)]]),p("   "),s("label",{for:a.value,class:"flex justify-between gap-1 w-full items-center"},[p(u(a.value)+" ",1),f(h,null,{default:k(()=>[p(u(a.count),1)]),_:2},1024)],8,oe)]))),256))])}}}),le={class:"text-right"},re=N({__name:"internal-link",props:{href:{}},setup(m){return(n,c)=>{const t=K;return o(),C(t,{href:n.href,class:"items-center grid grid-cols-[auto_auto_1fr] hover:bg-slate-200 active:bg-slate-300 p-2 rounded transition"},{default:k(()=>[s("span",null,[D(n.$slots,"default",{},()=>[p(u(n.href),1)])]),p("   "),s("span",le,[f(e(W),{class:"h-5 w-5 inline-block"})])]),_:3},8,["href"])}}}),ie={class:"grid grid-cols-[auto_1fr]"},ue={class:"max-w-container"},ce={key:1,class:"flex justify-between items-center my-2"},de=["disabled"],_e=s("span",{class:"sr-only"},"Previous Page",-1),fe=["disabled"],pe=s("span",{class:"sr-only"},"Next Page",-1),me={key:2,class:"grid grid-cols-[5fr_3fr_2fr] gap-y-2 gap-x-8"},he=s("div",null,"Name",-1),ve=s("div",null,"url",-1),ge=s("div",null,"time",-1),be={class:"flex items-center"},ye={class:"flex items-center"},$e=N({__name:"search",setup(m){const n=I();let c=String(n.query.q||""),t=Number(n.query.page||1),h=Number(n.query.limit||25),a=x(null),d=x(!0),b=x({"historical-period":[],language:[],"time-century":[],audience:[],"begin-date":[],"end-date":[]});const O=j=>{const r=[];return Object.entries(j).forEach(([y,_])=>{console.log("facets",y,_),_&&_.length!=0&&r.push(y+":=[`"+_.join("`,`")+"`]")}),console.log("retArray",r),r.join(" && ")},v=async()=>{d.value=!0,a=await G({q:c,query_by:"edition-name",per_page:250,page:t,facet_by:Object.keys(b.value).join(","),filter_by:O(b.value)}),console.log(a.value),d.value=!1};return v(),(j,r)=>{var _,q,V,B,M,z;const y=ae;return o(),i("div",ie,[s("div",null,[p(u(e(b))+" ",1),e(d)?F("",!0):(o(!0),i(w,{key:0},$((_=e(a))==null?void 0:_.facet_counts,l=>(o(),C(y,{facet:l,onFacetChange:P=>{e(b)[l.field_name]=P,v()}},null,8,["facet","onFacetChange"]))),256))]),s("div",ue,[L(s("input",{type:"search","onUpdate:modelValue":r[0]||(r[0]=l=>g(c)?c.value=l:c=l),onInput:r[1]||(r[1]=l=>{g(t)?t.value=1:t=1,v()}),class:"h-8 mx-auto my-4 p-4 rounded border",placeholder:"Search..."},null,544),[[R,e(c)]]),e(d)?(o(),C(Q,{key:0,class:"-z-10"},{default:k(()=>[f(e(H),{class:"h-5 w-5 animate-spin"})]),_:1})):(o(),i("div",ce,[s("button",{class:S(["p-4 border rounded transition",e(t)<=1?"text-gray-400 cursor-not-allowed":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:e(t)<=1,onClick:r[2]||(r[2]=l=>{g(t)?t.value--:t--,v()})},[_e,f(e(A),{class:"w-4 h-4 -rotate-90"})],10,de),s("span",null,"showing "+u((e(t)-1)*e(h)+1)+" - "+u(Math.min(((q=e(a))==null?void 0:q.found)||1/0,e(t)*e(h)))+" out of "+u((V=e(a))==null?void 0:V.found),1),s("button",{class:S(["p-4 border rounded transition",e(t)*e(h)>=Number((B=e(a))==null?void 0:B.found)?"text-gray-400 cursor-not-allowed":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:e(t)*e(h)>=Number((M=e(a))==null?void 0:M.found),onClick:r[3]||(r[3]=l=>{g(t)?t.value++:t++,v()})},[pe,f(e(A),{class:"w-4 h-4 rotate-90"})],10,fe)])),e(d)?F("",!0):(o(),i("div",me,[he,ve,ge,(o(!0),i(w,null,$((z=e(a))==null?void 0:z.hits,l=>(o(),i(w,null,[s("div",null,[f(re,{href:"/editions/"+l.document.id},{default:k(()=>[p(u(l.document["edition-name"]),1)]),_:2},1032,["href"])]),s("div",be,[f(J,{href:l.document.url},null,8,["href"])]),s("div",ye,u(l.document["time-century"]),1)],64))),256))]))])])}}});export{$e as default};
