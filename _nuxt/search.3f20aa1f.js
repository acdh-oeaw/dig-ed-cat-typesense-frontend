import{_ as z}from"./nuxt-link.6d092f19.js";import{o as r,a as i,b as s,e as D,i as M,r as w,p as P,v as S,u as e,q as _,c as $,w as k,h as v,s as N,t as l,F as q,j,x as F,k as I}from"./entry.2a07dfbb.js";import{b as L,d as T,r as E}from"./use-data.c7f52ee6.js";function C(B,c){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M11.47 7.72a.75.75 0 011.06 0l7.5 7.5a.75.75 0 11-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 01-1.06-1.06l7.5-7.5z","clip-rule":"evenodd"})])}const R={class:"max-w-container mx-auto"},U={key:1,class:"flex justify-between items-center my-2"},A=["disabled"],G=s("span",{class:"sr-only"},"Previous Page",-1),H=["disabled"],J=s("span",{class:"sr-only"},"Next Page",-1),K={key:2,class:"grid grid-cols-[5fr_3fr_2fr] gap-y-2 gap-x-8"},O=s("div",null,"Name",-1),Q=s("div",null,"url",-1),W=s("div",null,"time",-1),ee=D({__name:"search",setup(B){const c=M();let u=String(c.query.q||""),t=Number(c.query.page||1),d=Number(c.query.limit||25),a=w(null),m=w(!0);const p=()=>{m.value=!0,T({q:u,query_by:"edition-name",per_page:d,page:t}).then(f=>{console.log(f),a.value=f.value,m.value=!1})};return p(),(f,o)=>{var g,h,b,y,x;const V=z;return r(),i("div",R,[P(s("input",{type:"search","onUpdate:modelValue":o[0]||(o[0]=n=>_(u)?u.value=n:u=n),onInput:o[1]||(o[1]=n=>{_(t)?t.value=1:t=1,p()}),class:"h-8 mx-auto my-4 p-4 rounded border",placeholder:"Search..."},null,544),[[S,e(u)]]),e(m)?(r(),$(L,{key:0,class:"-z-10"},{default:k(()=>[v(e(E),{class:"h-5 w-5 animate-spin"})]),_:1})):(r(),i("div",U,[s("button",{class:N(["p-4 border rounded transition",e(t)<=1?"text-gray-400 cursor-not-allowed":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:e(t)<=1,onClick:o[2]||(o[2]=n=>{_(t)?t.value--:t--,p()})},[G,v(e(C),{class:"w-4 h-4 -rotate-90"})],10,A),s("span",null,"showing "+l((e(t)-1)*e(d)+1)+" - "+l(Math.min(((g=e(a))==null?void 0:g.found)||1/0,e(t)*e(d)))+" out of "+l((h=e(a))==null?void 0:h.found),1),s("button",{class:N(["p-4 border rounded transition",e(t)*e(d)>=Number((b=e(a))==null?void 0:b.found)?"text-gray-400 cursor-not-allowed":"cursor-pointer hover:bg-slate-200 active:bg-slate-300"]),disabled:e(t)*e(d)>=Number((y=e(a))==null?void 0:y.found),onClick:o[3]||(o[3]=n=>{_(t)?t.value++:t++,p()})},[J,v(e(C),{class:"w-4 h-4 rotate-90"})],10,H)])),e(m)?F("",!0):(r(),i("div",K,[O,Q,W,(r(!0),i(q,null,j((x=e(a))==null?void 0:x.hits,n=>(r(),i(q,null,[s("div",null,[v(V,{class:"hover:underline",href:"/editions/"+n.document.id},{default:k(()=>[I(l(n.document["edition-name"]),1)]),_:2},1032,["href"])]),s("div",null,l(n.document.url),1),s("div",null,l(n.document["time-century"]),1)],64))),256))]))])}}});export{ee as default};
