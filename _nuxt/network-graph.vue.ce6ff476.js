import{f as p,r as g,H as c,L as l,z as y,A as h,o as f,c as _,a as w,k as m,F as k}from"./entry.eca177e2.js";const C=d=>{const s={nodes:new Map,links:new Map};return d.nodes.forEach(e=>{s.nodes.set(e.key,{...e,neighbors:new Set})}),d.edges.forEach(e=>{s.links.set(e.key,e),typeof e.source=="string"?(s.nodes.get(e.source).neighbors.add(e.target),s.nodes.get(e.target).neighbors.add(e.source)):(s.nodes.get(e.source.key).neighbors.add(e.target.key),s.nodes.get(e.target.key).neighbors.add(e.source.key))}),s},A=(d,s)=>{const e={...d};return s.types&&(e.nodes=new Map([...e.nodes.entries()].filter(([t,r])=>{var n;return(n=s.types)==null?void 0:n.includes(r.attributes.type)}))),s.query&&(e.nodes=new Map([...e.nodes.entries()].filter(([t,r])=>r.attributes.label.includes(String(s.query))))),s.related_to&&(e.nodes=new Map([...e.nodes.entries()].filter(([t,r])=>{if(s.related_to===r.key)return!0;for(const n of r.neighbors)if(s.related_to===n)return!0;return!1}))),Object.keys(s).length&&(e.links=new Map([...e.links.entries()].filter(([t,r])=>typeof r.source=="string"&&typeof r.target=="string"?e.nodes.has(r.source)&&e.nodes.has(r.target):typeof r.source=="object"&&typeof r.target=="object"?e.nodes.has(r.source.key)&&e.nodes.has(r.target.key):!1))),e},i={Edition:"#A6CEE3",Institution:"#1F78B4",Person:"#FB9A99",City:"#B2DF8A",Country:"#33A02C"},E=Object.keys(i),v=p({__name:"network-graph",props:{data:{},width:{},height:{},selected:{}},emits:["nodeClick"],setup(d,{emit:s}){const e=d,t={graph:null},r=g(null),n=()=>{var u;const o=Array.from(e.data.nodes.values()),a=Array.from(e.data.links.values());(u=t.graph)==null||u.graphData({links:a,nodes:o})};return c(async()=>{if(r.value==null)return;const{default:o}=await l(()=>import("./force-graph.d74ebfde.js"),[],import.meta.url);t.graph=o(),t.graph.width(e.width),t.graph.height(e.height),t.graph.onNodeClick(a=>{s("nodeClick",a)}),t.graph.nodeVal(a=>a.neighbors.size+1),t.graph.nodeColor(a=>i[a.attributes.type]),t.graph.nodeId("key"),t.graph.nodeLabel(a=>`${a.attributes.label}<br />${a.attributes.type}`),t.graph.nodeAutoColorBy(a=>a.attributes.type),t.graph.linkDirectionalArrowLength(5),n(),t.graph(r.value)}),y(()=>{var o;(o=t.graph)==null||o._destructor()}),h(()=>e.height,()=>{t.graph!==null&&t.graph.height(e.height)}),h(()=>e.width,()=>{t.graph!==null&&t.graph.width(e.width)}),h(()=>e.data,()=>{t.graph!==null&&n()}),(o,a)=>(f(),_(k,null,[w("div",{ref_key:"elementRef",ref:r},null,512),m(o.$slots,"default",{context:t})],64))}});export{v as _,i as a,C as c,A as f,E as t};
